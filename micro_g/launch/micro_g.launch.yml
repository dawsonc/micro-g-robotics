# Example use:
# ros2 launch micro_g micro_g.launch.yml record_bag:=true

launch:

  - arg:
      name: robot_model
      default: px100

  - arg:
      name: robot_name
      default: px100

  - arg:
      name: motor_configs
      default: $(find-pkg-share micro_g)/config/px100.yml

  - arg:
      name: mode_configs
      default: $(find-pkg-share micro_g)/config/modes.yml

  - arg:
      name: use_foxglove
      default: "false"

  - arg:
      name: record_bag
      default: "true"

  - include:
      file: $(find-pkg-share micro_g)/launch/hw_interfaces.launch.yml
      arg:
        - name: robot_model
          value: $(var robot_model)
        - name: motor_configs
          value: $(var motor_configs)
        - name: mode_configs
          value: $(var mode_configs)

  - include:
      file: $(find-pkg-share micro_g_controllers)/launch/controllers.launch.py
      arg:
        - name: robot_model
          value: $(var robot_model)
        - name: robot_name
          value: $(var robot_name)

  - include:
      file: $(find-pkg-share micro_g_vision)/launch/vision.launch.py

  - include:
      file: $(find-pkg-share micro_g_controllers)/launch/grasp_selector.launch.py

  - include:
      file: $(find-pkg-share foxglove_bridge)/launch/foxglove_bridge_launch.xml
      if: $(var use_foxglove)

  - include:
      file: $(find-pkg-share micro_g)/launch/rosbag.launch.py
      if: $(var record_bag)

#   - executable:
#       cmd: ros2 bag record /accel/imu_info /accel/metadata /accel/sample /gyro/imu_info /gyro/metadata /gyro/sample /imu /color/camera_info /color/image_raw /color/metadata /extrinsics/depth_to_accel /extrinsics/depth_to_color /extrinsics/depth_to_depth /extrinsics/depth_to_gyro /detections /object_pose /odometry/unfiltered /time_since_last_seen /grasp_selector/current_target_point /grasp_selector/estimated_angle_of_incidence /grasp_selector/estimated_grasp_point /grasp_selector/estimated_velocity /px100/desired_eef_pose /px100/grasp /px100/robot_description /px100/joint_states /px100/commands/joint_group /px100/commands/joint_single /px100/commands/joint_trajectory /tf /tf_static
#       if: $(var record_bag)
